function popmenu(e){var o={x:event.clientX,y:event.clientY,items:{},callback:null};if("object"!=typeof e)return alert("请参考 options 选项正确设置"),!1;event.clientX,$.extend(o,e);var n="";for(var i in o.items){var p="";"string"===$.type(o.items[i].name)&&(p=o.items[i].name+" ");var r="";"string"===$.type(o.items[i].icon)&&(r=o.items[i].icon+" ");var t="";!0===o.items[i].divid&&(t="<hr>"),n+="<li id='"+i+"' name='"+p+"''>"+r+o.items[i].name+"</li>"+t}n="<div role='popmenu-layer'><ul role='popmenu'>"+n+"</ul></div>",$("body").append(n),$("[role='popmenu']").css({left:o.x,top:o.y}),$("[role='popmenu']>li").bind("click",function(e){"function"===$.type(o.callback)?o.callback(this):alert("菜单ID【"+$(this).attr("id")+"】被点击"),$(this).parent().hide(),$("[role='popmenu-layer']").remove()}),$("[role='popmenu']").focus(),$("[role='popmenu']>li").hover(function(){$(this).addClass("popmenu-hover")},function(){$(this).removeClass("popmenu-hover")}),$(".popmenu-layer").mousedown(function(e){$("[role='popmenu']").hide(),$("[role='popmenu-layer']").remove()}),$(window).blur(function(e){$("[role='popmenu']").hide(),$("[role='popmenu-layer']").remove()}),$(window).mousedown(function(e){$("[role='popmenu']").hide(),$("[role='popmenu-layer']").remove()}),$("[role='popmenu']").mousedown(function(e){e.stopPropagation()}),$(window).resize(function(e){$("[role='popmenu']").hide(),$("[role='popmenu-layer']").remove()})}
